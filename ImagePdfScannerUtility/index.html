<!DOCTYPE html>
<html lang="en">

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="msapplication-tap-highlight" content="no">
  <meta name="description" content="">
  <meta name="keywords" content="">
  <title>Image/pdf Scanner Utility</title>
  <!-- Favicons-->
  <link rel="icon" href="img/favicon-32x32.png" sizes="32x32">
  <!-- Favicons-->
  <link rel="apple-touch-icon-precomposed" href="img/apple-touch-icon-152x152.png">
  <!-- For iPhone -->
  <meta name="msapplication-TileColor" content="#00bcd4">
  <meta name="msapplication-TileImage" content="img/favicon/mstile-144x144.png">

  <link href="css/materialize.css" type="text/css" rel="stylesheet">
  <link href="css/style.css" type="text/css" rel="stylesheet">
  <script type="text/javascript" src="../pdfjs/build/pdf.js"></script>
  <!-- Custome CSS-->
  <link href="css/custom.css" type="text/css" rel="stylesheet">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

  <style>

  </style>
</head>

<body class="loaded">
  <input type="hidden" id="ordernumber" placeholder="Order Number">
  <input type="hidden" id="innovicenumber" placeholder="Innovice Number">
  <input type="hidden" id="innovicestartdate" placeholder="Innovice StartDate">
  <input type="hidden" id="innoviceduedate" placeholder="Innovice DueDate">
  <input type="hidden" id="innvoiceamount" placeholder="Innvoice Amount">
  <input type="hidden" id="invoiceleft" placeholder="Left">
  <input type="hidden" id="invoicetop" placeholder="Top">
  <textarea style="display:none;" id="base64textarea" placeholder="Base64 will appear here" cols="50" rows="15"></textarea>
  <div id="text-overlay" style="display:none;"></div>





  <div id="loader-wrapper">
    <div id="loader"></div>
    <div class="loader-section section-left"></div>
    <div class="loader-section section-right"></div>
  </div>
  <header id="header" class="page-topbar">
    <!-- start header nav-->
    <div class="navbar-fixed">
      <nav class="navbar-color gradient-45deg-purple-deep-orange gradient-shadow" style="background: #ffffff;color: #ffffff;">
        <span>&nbsp;&nbsp;&nbsp;<img src="img/logo_gste.png" style="height: 52px;width: 168px;margin-top: -32px;" alt="avatar"/></span>
        <div class="header-search-wrapper hide-on-med-and-down sideNav-lock">
          <h3 style="text-align:center;color: #0a7abb;padding-top: -2px !important;margin-left: 73px;margin-top: 7px;position: absolute;">Image/pdf Scanner Utility</h3>

        </div>


        <!-- <div class="nav-wrapper">
          <ul class="right hide-on-med-and-down">
            <li style="margin-top:-85px;">
              <a href="javascript:void(0);" class="waves-effect waves-block waves-light toggle-fullscreen">
                <i class="material-icons">settings_overscan</i>
              </a>
            </li>
          </ul>

        </div> -->
      </nav>
    </div>
  </header>

  <div id="main">
    <!-- START WRAPPER -->
    <div class="wrapper">

      <!-- //////////////////////////////////////////////////////////////////////////// -->
      <!-- START CONTENT -->
      <section id="content">
        <!--start container-->
        <div class="container">
          <!--card stats start-->
          <div id="card-stats">
          </div>
          <div id="card-stats">
            <div class="row" style="margin-top:-38px;">

              <div class="col s8 m4 8" style="margin-left:-77px;">

                <!-- </span> <a class="waves-effect waves-light btn gradient-45deg-purple-deep-orange gradient-shadow" style="color: white;background: #0a7abb;">Export as CSV</a> -->


                                                                   <!-- <input type="submit" class="waves-effect waves-light btn gradient-45deg-purple-deep-orange gradient-shadow"style="color: white;background: #0a7abb;"  value="Save co-ordinates" /> -->


                <!-- </span> <a class="waves-effect waves-light btn gradient-45deg-purple-deep-orange gradient-shadow right" style="color: white;background: #0a7abb;">Save Coordinates</a> -->
                <br/>

                <!-- <div class="card gradient-45deg-light-blue-cyan gradient-shadow min-height-100 white-text" style="min-height:255px !important">
                  <h4 style="text-align: center; color:white">General Details</h4><br/>

                  <div class="col s6 m6" style="background-color: #d3e0eb;color: #377bbb;margin-top: -20px;height: 225px;">
                    <br/>Invoice Number<br/><br/> Invoice Date<br/><br/> Payment Due<br/><br/> Currency
                    <br/><br/> Amount Due
                  </div>
                  <div class="col s6 m6 right-align" style="background-color: #d3e0eb;margin-top: -20px;height: 225px;/* padding-top: 16px; */">
                    <br/>
                    <input type="text" id="innovoicename" placeholder="Invoice Name">
                    <input type="text" id="invoice_date" placeholder="Invoice Date">
                    <input type="text" id="po_no" placeholder="Payment Due">
                    <input type="text" id="currency" placeholder="Currency">
                    <input type="text" id="payment_terms" placeholder="Payment Terms">
                  </div>

                </div> -->
                <form class="pdf_form" name="f_data">
                  <div id="first">
                <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">

                <div class="card gradient-45deg-light-blue-cyan gradient-shadow min-height-100 white-text" style="min-height:0px !important">
   <div class="text">
                	<a role="button"  id="collapse" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
	              <i class="glyphicon glyphicon-plus" id="ki" style="color:white;float:right;padding-right:10px;"></i></a>
					<h4 style="text-align: center; color:white;">General Details</h4><br />
</div>
	<div id="collapseOne" class="panel-collapse collapse" style="display:visible;"role="tabpanel" aria-labelledby="headingOne">
                      <div class="col s6 m6" style="background-color: #d3e0eb;color: #377bbb;margin-top: -20px;height: 749px;">
                         <br/>Invoice Number<br/><br/>
						 Invoice Date<br/><br/>
						 Payment Due<br/><br/>
						 <!-- Currency<br/><br/> -->
						Amount Due<br/><br/>
            Supplier Name<br/><br/>
            Supplier GSTIN<br/><br/>
            Supplier State<br/><br/>
            Place Of Supply <br/><br/>
            Item Listing Start Key<br/><br/>
            Item Listing End Key<br/><br/>
            Subtotal Key<br/><br/>
            Total Key<br/><br/>
            Net Amount<br/><br/>
            Item 1<br/><br/>
            Item 2<br/><br/>
            Item 3<br/><br/>
            Item 4<br/><br/>
            Item 5<br/><br/>


                      </div>
                      <div class="col s6 m6 right-align"style="background-color: #d3e0eb;margin-top: -20px;height: 749px;/* padding-top: 16px; */">
					<br/>
          <input type="text" id="innovoicename" name="innovoicename" placeholder="Invoice Name">
          <input type="text" id="invoice_date" name="invoice_date" placeholder="Invoice Date">
          <input type="text" id="po_no" name="payment_due" placeholder="Payment Due">
          <input type="hidden" id="currency"name="currency" placeholder="Currency">
          <input type="text" id="payment_terms" name="amount_due" placeholder="Payment Terms">

          <input type="text" id="supplier_name" name="supplierName" placeholder="  Supplier Name">
          <input type="text" id="supplier_gstin" name="supplierGSTIN" placeholder="Supplier GSTIN">
          <input type="text" id="supplier_state" name="supplierState" placeholder="Supplier State">
          <input type="text" id="place_of_supply" name="placeOfSupply" placeholder="Place Of Supply">

          <input type="text" id="item_starts" name="itemStarts" placeholder="Item Starts">
          <input type="text" id="item_ends" name="itemEnds" placeholder="Item Ends">
          <input type="text" id="subtotal" name="subtotal" placeholder="Subtotal">
          <input type="text" id="total" name="total" placeholder="Total">
          <input type="text" id="netamount" name="netAmount" placeholder="NetAmount">

                    <input type="text" id="item1" name="item1" placeholder="item1">
                    <input type="text" id="item2" name="item2" placeholder="item2">
                    <input type="text" id="item3" name="item3" placeholder="item3">
                    <input type="text" id="item4" name="item4" placeholder="item4">
                    <input type="text" id="item5" name="item5" placeholder="item5">

<!--
          <input type="text" id="subtotalval" name="subTotalv" placeholder="Subtotal">
          <input type="text" id="totalval" name="Totalv" placeholder="Total">
          <input type="text" id="netamountval" name="netAmountV" placeholder="NetAmount"> -->



                      </div>

                  </div>
				  </div>

                    </div>
                  </div>
                  <button type="submit" id="s_d1" class="save_data waves-effect waves-light btn gradient-45deg-purple-deep-orange gradient-shadow"style="color: white;background: #0a7abb;margin-left: 571px;margin-top: -1602px;"  value="Save data" >Save data</button>

                  </form>


                <div style="display:none;" class="card gradient-45deg-light-blue-cyan gradient-shadow min-height-100 white-text">
                  <h4 style="text-align: center; color:white">Notes</h4><br/>

                  <div class="col s6 m6" style="background-color: #d3e0eb;margin-top: -20px;height: 290px;">
                    <br/>GST<br/><br/> SAC CODE<br/><br/> GST NO<br/><br/>
                    <!-- PAYABLE TO<br/><br/> -->

                  </div>
                  <div class="col s6 m6 right-align" style="background-color: #d3e0eb;margin-top: -20px;height: 290px;/* padding-top: 16px; */">
                    <br/>
                    <input type="text" id="gst_nt" />
                    <input type="text" id="sac_nt" />
                    <input type="text" id="gst_no_nt" />
                    <!-- <input type="text"id="payable_nt"/> -->


                  </div>

                </div>



                <table id="notes_tb"  style="display:none;">
                  <tr>
                    <th>Notes</th>
                    <th>Data</th>

                  </tr>


                </table>
                <br />
                <table id="item_tb"  >
                  <tr>
                    <th>Product</th>
                    <th>Quantity</th>
                    <th>Price</th>
                    <th>Amount</th>

                  </tr>


                </table>



                <div class="form-group">
                  <label class="control-label col-sm-6" for="email">Choose a file:</label>

                  <div class="">


                    <input type="file" style="display:none;"id="filePicker">
                    <input type="hidden" id="newinnovoicename" value="" placeholder="Innovoice Name">

                  </div>
                </div>

              </div>

              <!-- <input type="file" id="filePicker"> -->
              <!-- <div class="fileinput fileinput-new" data-provides="fileinput">
                    <span class="btn btn-default btn-file"><span>Choose file</span><input type="file" /></span>
                    <span class="fileinput-filename"></span><span class="fileinput-new"></span>
                </div> -->



              <div class="col s12 m8 24" style="margin-top:38px;">
    <span id="templatename1"class="" style="position:absolute;color:#6ba4d0;font-size: x-large;margin-left: 290px;"></span>
              <!-- </span> <a href="#notes_tb" class="waves-effect waves-light btn gradient-45deg-purple-deep-orange gradient-shadow" style="position:absolute;color: white;margin-left: 530px;background: #0a7abb;">Generate Reports Details</a> -->
            </span> <button class=" gen_btn waves-effect waves-light btn gradient-45deg-purple-deep-orange gradient-shadow right" style="color: white;background: #0a7abb;/* margin-left: -129px; */position: absolute;margin-left: 670px;">Generate File </button>
          </span> <a  class="waves-effect waves-light btn gradient-45deg-purple-deep-orange gradient-shadow right" style="color: white;background: #0a7abb;position: absolute;margin-left: 810px;" id="imageupload">Upload </a>


                <form method="post" name="f_co">

                  <input type="hidden" id="innovoicename1" name="InvoiceNumber" placeholder="Invoice Name">
                  <input type="hidden" id="invoice_date1" name="InvoiceDate"placeholder="Invoice Date">
                  <input type="hidden" id="po_no1"name="PaymentDue" placeholder="Payment Due">
                  <input type="hidden" id="payment_terms1" name="AmountDue"  placeholder="Payment Terms">
                  <!-- <input type="hidden" value=""name="bf_CompanyName" id="company_name_bf1" />
                  <input type="hidden" value=""name="bt_CompanyName" id="company_name_bt1" />
                  <input type="hidden" value=""name="bf_Phonenumber" id="ph_bf1" />
                  <input type="hidden" value=""name="bt_email" id="email_bt1" /> -->



                  <input type="hidden" value=""name="supplierName" id="supplier_name1" />
                  <input type="hidden" value=""name="supplierGSTIN" id="supplier_gstin1" />
                  <input type="hidden" value=""name="supplierState" id="supplier_state1" />
                  <input type="hidden" value=""name="placeOfSupply" id="place_of_supply1" />
                  <input type="hidden" value=""name="itemStarts" id="item_starts1" />
                  <input type="hidden" value=""name="itemEnds" id="item_ends1" />
                  <input type="hidden" value=""name="total" id="total1" />
                  <input type="hidden" value=""name="subtotal" id="subtotal1" />
                  <input type="hidden" value=""name="netAmount" id="netamount1" />

      <input type="hidden" id="item11" name="item11" placeholder="item11" />
  <input type="hidden" id="item21" name="item22" placeholder="item22" />
  <input type="hidden" id="item31" name="item33" placeholder="item33" />
    <input type="hidden" id="item41" name="item44" placeholder="item44" />
    <input type="hidden" id="item51" name="item55" placeholder="item55" />




                           <button type="submit" id="s_c1" class="waves-effect waves-light btn gradient-45deg-purple-deep-orange gradient-shadow" style="color: white;background: #0a7abb;"  value="Save co-ordinates" >Save co-ordinates</button>
                           <!-- <button class='gen_btn'>Generate File</button> -->

                    </form>
                <div id="sdsd"class="card gradient-45deg-gray-teal gradient-shadow min-height-100 white-text"style="width:118%;">
                  <div style="height:1190px;">
                    <div class="zone" id="div">

                      <div id="dropZ">

                        <div class="selectFile">
                          <img src="img/upload.png" id="imageupload1" style="margin-top: 128px !important;" style="margin-top: 128px !important;" />
                        </div>
                      </div>

                    </div>
                    <!-- <canvas id="the-canvas" style="width:1204px !important"></canvas> -->
                    <canvas id="the-canvas"></canvas>

                  </div>


                </div>


              </div>





            </div>
          </div>
          <!--card stats end-->
        </div>














        <div class="modal fade" id="myModal1" role="dialog">
          <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
              <div class="modal-body">
                <select id="save_existing_new" onchange="save_e_n_c()">
                                                              <option value="new">New</option>
                                                              <option value="sdsdsd">Infy</option>


                                                            </select>
            <input type="text" id="templatename" value="" placeholder="Template Name" style="display:none;">

              </div>
              <div class="modal-footer">
                <input type="button" class="btn btn-default" data-dismiss="modal" onclick="save_e_n()" value="Save" />
              </div>
            </div>

          </div>
        </div>

        <div class="modal fade" id="myModal2" role="dialog">
          <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
              <div class="modal-body">
                <select id="save_existing_new_l" onchange="save_e_n_c_l()">
                                                              <option value="new">New</option>
                                                              <option value="sdsdsd">Infy</option>


                                                            </select>
                                                            <input type="text" id="templatename11" value="" placeholder="Template Name" style="display:none;">


              </div>
              <div class="modal-footer">
                <input type="button" class="btn btn-default" data-dismiss="modal" onclick="save_e_n_l()" value="Save" />
              </div>
            </div>

          </div>
        </div>









        <img id=img src="" style="display:none" />


        <script type="text/javascript" src="js/jquery-3.2.1.min.js"></script>
        <!--materialize js-->
        <script type="text/javascript" src="js/materialize.min.js"></script>
        <!--prism-->
        <script type="text/javascript" src="js/prism.js"></script>
        <!--scrollbar-->
        <script type="text/javascript" src="js/perfect-scrollbar.min.js"></script>
        <!-- chartjs -->
        <script type="text/javascript" src="js/chart.min.js"></script>
        <!--plugins.js - Some Specific JS codes for Plugin Settings-->
        <script type="text/javascript" src="js/plugins.js"></script>
        <!--custom-script.js - Add your own theme custom JS-->
        <script type="text/javascript" src="js/custom-script.js"></script>
        <script type="text/javascript" src="js/dashboard-ecommerce.js"></script>
        <style>
          @import url(https://fonts.googleapis.com/css?family=Exo+2:400,700,500,300);

          body {
            background: #ebeff2;
            font-family: "Exo 2";
          }

          #notes_tb {
            font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
            border-collapse: collapse;
            width: 100%;
          }

          #notes_tb td,
          #notes_tb th {
            border: 1px solid #ddd;
            padding: 8px;
          }

          #notes_tb tr:nth-child(even) {
            background-color: #d3e0eb;
          }

          #notes_tb tr:hover {
            background-color: #d3e0eb;
          }

          #notes_tb th {
            padding-top: 12px;
            padding-bottom: 12px;
            text-align: left;
            background-color: #0a7abb;
            color: white;
          }

          #item_tb {
            font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
            border-collapse: collapse;
            width: 100%;
          }

          #item_tb td,
          #item_tb th {
            border: 1px solid #ddd;
            padding: 8px;
          }

          #item_tb tr:nth-child(even) {
            background-color: #d3e0eb;
          }

          #item_tb tr:hover {
            background-color: #d3e0eb;
          }

          #item_tb th {
            padding-top: 12px;
            padding-bottom: 12px;
            text-align: left;
            background-color: #0a7abb;
            color: white;
          }

          .zone {
            margin: auto;
            position: absolute;
            top: -517px;
            left: 0;
            bottom: 0;
            right: 0;
            background: #d3e0eb;
            width: 80%;
            height: 50%;
            border: 5px dashed #0a7abb;
            text-align: center;
            color: white;
            z-index: 20;
            transition: all 0.3s ease-out;
            box-shadow: 0 0 0 1px rgba(255, 255, 255, .05), inset 0 0 .25em 0 rgba(0, 0, 0, .25);
            .btnCompression {
              .btn {}
              .active {
                background: #EB6A5A;
                color: white;
              }
            }
            i {
              text-align: center;
              font-size: 10em;
              color: #fff;
              margin-top: 50px;
            }
            .selectFile {
              height: 50px;
              margin: 20px auto;
              position: relative;
              width: 200px;
            }

            label,
            input {
              cursor: pointer;
              display: block;
              height: 50px;
              left: 0;
              position: absolute;
              top: 0;
              width: 100%;
              border-radius: 5px;
            }

            label {
              background: #fff;
              color: #EB6A5A;
              display: inline-block;
              font-size: 1.2em;
              line-height: 50px;
              padding: 0;
              text-align: center;
              white-space: nowrap;
              text-transform: uppercase;
              font-weight: 400;
              box-shadow: 0 1px 1px gray;
            }

            input[type=file] {
              opacity: 0;
            }
          }

          .zone.in {
            color: white;
            border-color: white;
            background: radial-gradient(ellipse at center, #EB6A5A 0, #c9402f 100%);
            i {
              color: #fff;
            }
            label {
              background: #fff;
              color: #EB6A5A;
            }
          }

          .zone.hover {
            color: gray;
            border-color: white;
            background: #fff;
            border: 5px dashed gray;
            i {
              color: #EB6A5A;
            }
            label {
              background: #fff;
              color: #EB6A5A;
            }
          }

          .zone.fade {
            transition: all 0.3s ease-out;
            opacity: 1;
          }
          .caret {
    display: none !important;
  }
  .modal-footer
{
  padding: 15px;
text-align: right;
border-top: 0px solid #e5e5e5 !important;
}
        </style>
        <script>




        </script>



        <script src="https://mozilla.github.io/pdf.js/build/pdf.js"></script>
        <script>

        function save_e_n_c_l()
        {

        //console.log($('#save_existing_new_l').val());

        if(document.getElementById("save_existing_new_l").value=="new")
        {
      document.getElementById('templatename11').style.display = 'block';
      setTimeout(function(){
      $( "#templatename1" ).append( "<p> Template Name: "+$('#templatename11').val()+"</p>" );
}, 3000);
        }
        else
        {
$( "#templatename1" ).append( "<p> Template Name: "+$('#save_existing_new_l').val()+"</p>" );
}

        }


var r;
var r1=1;
var r2;



        var innovoicename_left='';
        var innovoicename_top='';
        var innovoicename_right='';
        var innovoicename_bottom='';

        var invoice_date_top='';
        var invoice_date_left='';
        var invoice_date_right='';
        var invoice_date_bottom='';

        var AmountDue_left='';
        var AmountDue_top='';
        var AmountDue_right='';
        var AmountDue_bottom='';

        // var currency_top='';
        // var currency_left='';
        // var currency_right='';
        // var currency_bottom='';

        var PaymentDue_left='';
        var PaymentDue_top='';
        var PaymentDue_right='';
        var PaymentDue_bottom='';

        var company_name_bf_left='';
        var company_name_bf_top='';
        var company_name_bf_right='';
        var company_name_bf_bottom='';

        var ph_bf_left='';
        var ph_bf_top='';
        var ph_bf_right='';
        var ph_bf_bottom='';

        var company_name_bt_left='';
        var company_name_bt_top='';
        var company_name_bt_right='';
        var company_name_bt_bottom='';

        var email_bt_top='';
        var email_bt_left='';
        var email_bt_right='';
        var email_bt_bottom='';

        var gst_nt_top='';
        var gst_nt_left='';
        var gst_nt_right='';
        var gst_nt_bottom='';

        var sac_nt_top='';
        var sac_nt_left='';
        var sac_nt_right='';
        var sac_nt_bottom='';

        var gst_no_nt_left='';
        var gst_no_nt_top='';
        var gst_no_nt_right='';
        var gst_no_nt_bottom='';

        var supplier_name_left='';
        var supplier_name_right='';
        var supplier_name_top='';
        var supplier_name_bottom='';



        var supplier_gstin_left='';
        var supplier_gstin_right='';
        var supplier_gstin_top='';
        var supplier_gstin_bottom='';


        var supplier_state_left='';
        var supplier_state_right='';
        var supplier_state_top='';
        var supplier_state_bottom='';

        var place_of_supply_left='';
        var place_of_supply_right='';
        var place_of_supply_top='';
        var place_of_supply_bottom='';

        var item_starts_left='';
        var item_starts_right='';
        var item_starts_top='';
        var item_starts_bottom='';

        var item_ends_left='';
        var item_ends_right='';
        var item_ends_top='';
        var item_ends_bottom='';

        var subtotal_left='';
        var subtotal_right='';
        var subtotal_top='';
        var subtotal_bottom='';

        var total_left='';
        var total_right='';
        var total_top='';
        var total_bottom='';

        var netamount_left='';
        var netamount_right='';
        var netamount_top='';
        var netamount_bottom='';
        //


        var item_left='';
        var item_right='';
        var item_top='';
        var item_bottom='';

        var item11_left='';
        var item11_right='';
        var item11_top='';
        var item11_bottom='';


        var item21_left='';
        var item21_right='';
        var item21_top='';
        var item21_bottom='';


        var item31_left='';
        var item31_right='';
        var item31_top='';
        var item31_bottom='';


        var item41_left='';
        var item41_right='';
        var item41_top='';
        var item41_bottom='';

        var item51_left='';
        var item51_right='';
        var item51_top='';
        var item51_bottom='';

        var c_left='';
        var c_right='';
        var c_top='';
        var c_bottom='';
        //
        // var c_left='';
        // var c_right='';
        // var c_top='';
        // var c_bottom='';
  var netamount_key='';
    var total_key='';
      var subtotal_key='';
        var item_starts_key='';
          var item_ends_key='';

var files111='';
var file111='';

  var focus_input='';

        $( "input" ).focus(function() {
          //console.log("Dsds ");
          //console.log(this.id);
          focus_input=this.id;
        });



        function save_e_n_l()
        {
          //
          // $('#save_existing_new_l').val()
          document.body.style.overflow = "auto";

          var values_pdf=$('#save_existing_new_l').val()
          //console.log($('#save_existing_new_l').val());


        if(values_pdf!="new")
        {
            $.ajax({

                type: "GET",
                url: "http://localhost:3000/api/get_coordinates_values/"+values_pdf
            }).done(function (e) {
                //console.log(e);

        //console.log(e);

        var str = e.InvoiceNumber;
        //console.log(str);
        if(e.InvoiceNumber!="")
        {
          document.getElementById("innovoicename1").value = e.InvoiceNumber;

        var InvoiceNumber = str.split(',');
        for (var k = 0; k < InvoiceNumber.length; k++) {

              innovoicename_left=InvoiceNumber[0]+"px".toString();
                                      innovoicename_top=(InvoiceNumber[1]/10)+"px".toString();
innovoicename_right=(parseInt(InvoiceNumber[2])+parseInt(InvoiceNumber[0]))+"px".toString();
innovoicename_bottom=(parseInt(InvoiceNumber[3])+parseInt(InvoiceNumber[1]/10))+"px".toString();

//console.log(innovoicename_right);
//console.log(innovoicename_bottom);


                                   }
}
if(e.InvoiceDate!="")
{
  document.getElementById("invoice_date1").value = e.InvoiceDate;

        var InvoiceDate = e.InvoiceDate.split(',');

        for(var i = 0; i < InvoiceDate.length; i++) {
        // Trim the excess whitespace.

        invoice_date_left=InvoiceDate[0]+"px".toString();
        invoice_date_top=(InvoiceDate[1]/10)+"px".toString();
        invoice_date_right=(parseInt(InvoiceDate[2])+parseInt(InvoiceDate[0]))+"px".toString();
        invoice_date_bottom=(parseInt(InvoiceDate[3])+parseInt(InvoiceDate[1]/10))+"px".toString();
        // Add additional code here, such as:

        }
      }
      if(e.PaymentDue!="")
      {
        document.getElementById("po_no1").value = e.PaymentDue;

        var PaymentDue = e.PaymentDue.split(',');

        for(var i = 0; i < PaymentDue.length; i++) {
        // Trim the excess whitespace.
        PaymentDue_left=PaymentDue[0]+"px".toString();
        PaymentDue_top=(PaymentDue[1]/10)+"px".toString();
        // Add additional code here, such as:
        PaymentDue_right=(parseInt(PaymentDue[2])+parseInt(PaymentDue[0]))+"px".toString();
        PaymentDue_bottom=(parseInt(PaymentDue[3])+parseInt(PaymentDue[1]/10))+"px".toString();
        }
}

      if(e.AmountDue!="")
      {
        document.getElementById("payment_terms1").value = e.AmountDue;

        var AmountDue = e.AmountDue.split(',');

        for(var i = 0; i < AmountDue.length; i++) {
        // Trim the excess whitespace.
        AmountDue_left=AmountDue[0]+"px".toString();
        AmountDue_top=(AmountDue[1]/10)+"px".toString();
        // Add additional code here, such as:
        AmountDue_right=(parseInt(AmountDue[2])+parseInt(AmountDue[0]))+"px".toString();
        AmountDue_bottom=(parseInt(AmountDue[3])+parseInt(AmountDue[1]/10))+"px".toString();
        }
      }

      if(e.supplierName!="")
      {
        document.getElementById("supplier_name1").value = e.supplierName;

        var supplierName = e.supplierName.split(',');

        for(var i = 0; i < supplierName.length; i++) {
        // Trim the excess whitespace.
        supplier_name_left=supplierName[0]+"px".toString();
        supplier_name_top=(supplierName[1]/10)+"px".toString();
        // Add additional code here, such as:
        supplier_name_right=(parseInt(supplierName[2])+parseInt(supplierName[0]))+"px".toString();
        supplier_name_bottom=(parseInt(supplierName[3])+parseInt(supplierName[1]/10))+"px".toString();
        }
      }  if(e.supplierGSTIN!="")
        {
          document.getElementById("supplier_gstin1").value = e.supplierGSTIN;

          var supplierGSTIN = e.supplierGSTIN.split(',');

          for(var i = 0; i < supplierGSTIN.length; i++) {
          // Trim the excess whitespace.
          supplier_gstin_left=supplierGSTIN[0]+"px".toString();
          supplier_gstin_top=(supplierGSTIN[1]/10)+"px".toString();
          // Add additional code here, such as:
          supplier_gstin_right=(parseInt(supplierGSTIN[2])+parseInt(supplierGSTIN[0]))+"px".toString();
          supplier_gstin_bottom=(parseInt(supplierGSTIN[3])+parseInt(supplierGSTIN[1]/10))+"px".toString();
          }
        }  if(e.supplierState!="")
          {
            document.getElementById("supplier_state1").value = e.supplierState;

            var supplierState = e.supplierState.split(',');

            for(var i = 0; i < supplierState.length; i++) {
            // Trim the excess whitespace.
            supplier_state_left=supplierState[0]+"px".toString();
            supplier_state_top=(supplierState[1]/10)+"px".toString();
            // Add additional code here, such as:
            supplier_state_right=(parseInt(supplierState[2])+parseInt(supplierState[0]))+"px".toString();
            supplier_state_bottom=(parseInt(supplierState[3])+parseInt(supplierState[1]/10))+"px".toString();
            }
          }
          if(e.placeOfSupply!="")
            {
              document.getElementById("place_of_supply1").value = e.placeOfSupply;

              var placeOfSupply = e.placeOfSupply.split(',');

              for(var i = 0; i < placeOfSupply.length; i++) {
              // Trim the excess whitespace.
              place_of_supply_left=placeOfSupply[0]+"px".toString();
              place_of_supply_top=(placeOfSupply[1]/10)+"px".toString();
              // Add additional code here, such as:
              place_of_supply_right=(parseInt(placeOfSupply[2])+parseInt(placeOfSupply[0]))+"px".toString();
              place_of_supply_bottom=(parseInt(placeOfSupply[3])+parseInt(placeOfSupply[1]/10))+"px".toString();
              }
            }

              if(e.itemStarts!="")
              {
                document.getElementById("item_starts1").value = e.itemStarts;

                item_starts_key = e.itemStarts;

                // for(var i = 0; i < itemStarts.length; i++) {
                // // Trim the excess whitespace.
                // item_starts_left=itemStarts[0]+"px".toString();
                // item_starts_top=(itemStarts[1]/10)+"px".toString();
                // // Add additional code here, such as:
                // item_starts_right=(parseInt(itemStarts[2])+parseInt(itemStarts[0]))+"px".toString();
                // item_starts_bottom=(parseInt(itemStarts[3])+parseInt(itemStarts[1]/10))+"px".toString();
                // }
              }  if(e.itemEnds!="")
                {
                  document.getElementById("item_ends1").value = e.itemEnds;

                  item_ends_key = e.itemEnds;

                  // for(var i = 0; i < itemEnds.length; i++) {
                  // // Trim the excess whitespace.
                  // item_ends_left=itemEnds[0]+"px".toString();
                  // item_ends_top=(itemEnds[1]/10)+"px".toString();
                  // // Add additional code here, such as:
                  // item_ends_right=(parseInt(itemEnds[2])+parseInt(itemEnds[0]))+"px".toString();
                  // item_ends_bottom=(parseInt(itemEnds[3])+parseInt(itemEnds[1]/10))+"px".toString();
                  // }
                }  if(e.subtotal!="")
                  {
                    document.getElementById("subtotal1").value = e.subtotal;

                    subtotal = e.subtotal;

                    for(var i = 0; i < subtotal.length; i++) {
                    // Trim the excess whitespace.
                    subtotal_left=subtotal[0]+"px".toString();
                    subtotal_top=(subtotal[1]/10)+"px".toString();
                    // Add additional code here, such as:
                    subtotal_right=(parseInt(subtotal[2])+parseInt(subtotal[0]))+"px".toString();
                    subtotal_bottom=(parseInt(subtotal[3])+parseInt(subtotal[1]/10))+"px".toString();
                    }
                  }
                   if(e.total!="")
                    {
                      document.getElementById("total1").value = e.total;

                      total_key = e.total;

                      for(var i = 0; i < total.length; i++) {
                      // Trim the excess whitespace.
                      total_left=total[0]+"px".toString();
                      total_top=(total[1]/10)+"px".toString();
                      // Add additional code here, such as:
                      total_right=(parseInt(total[2])+parseInt(total[0]))+"px".toString();
                      total_bottom=(parseInt(total[3])+parseInt(total[1]/10))+"px".toString();
                      }
                    }

                    if(e.netAmount!="")
                     {
                       document.getElementById("netamount1").value = e.netAmount;

                       netAmount = e.netAmount;

                       for(var i = 0; i < netAmount.length; i++) {
                       // Trim the excess whitespace.
                       netAmount_left=netAmount[0]+"px".toString();
                       netAmount_top=(netAmount[1]/10)+"px".toString();
                       // Add additional code here, such as:
                      netAmount_right=(parseInt(netAmount[2])+parseInt(netAmount[0]))+"px".toString();
                       netAmount_bottom=(parseInt(netAmount[3])+parseInt(netAmount[1]/10))+"px".toString();
                       }
                     }



                     if(e.item11!="")
                       {
                         document.getElementById("item11").value = e.item11;

                         var item11 = e.item11.split(',');

                         for(var i = 0; i < item11.length; i++) {
                         // Trim the excess whitespace.
                         item11_left=item11[0]+"px".toString();
                         item11_top=(item11[1]/10)+"px".toString();
                         // Add additional code here, such as:
                         item11_right=(parseInt(item11[2])+parseInt(item11[0]))+"px".toString();
                         item11_bottom=(parseInt(item11[3])+parseInt(item11[1]/10))+"px".toString();
                         }

                         //console.log("item11");
                         //console.log(item11_left);
                         //console.log(item11_top);
                         //console.log(item11_right);
                         //console.log(item11_bottom);
                         //console.log("item11");
                       }


                       if(e.item22!="")
                         {
                           document.getElementById("item21").value = e.item21;

                           var item21 = e.item22.split(',');

                           for(var i = 0; i < item21.length; i++) {
                           // Trim the excess whitespace.
                           item21_left=item21[0]+"px".toString();
                           item21_top=(item21[1]/10)+"px".toString();
                           // Add additional code here, such as:
                           item21_right=(parseInt(item21[2])+parseInt(item21[0]))+"px".toString();
                           item21_bottom=(parseInt(item21[3])+parseInt(item21[1]/10))+"px".toString();
                           }
                         }

                         if(e.item33!="")
                           {
                             document.getElementById("item31").value = e.item31;

                             var item31 = e.item33.split(',');

                             for(var i = 0; i < item31.length; i++) {
                             // Trim the excess whitespace.
                             item31_left=item31[0]+"px".toString();
                             item31_top=(item31[1]/10)+"px".toString();
                             // Add additional code here, such as:
                             item31_right=(parseInt(item31[2])+parseInt(item31[0]))+"px".toString();
                             item31_bottom=(parseInt(item31[3])+parseInt(item31[1]/10))+"px".toString();
                             }
                           }

                           if(e.item44!="")
                             {
                               document.getElementById("item41").value = e.item41;

                               var item41 = e.item44.split(',');

                               for(var i = 0; i < item41.length; i++) {
                               // Trim the excess whitespace.
                               item41_left=item41[0]+"px".toString();
                               item41_top=(item41[1]/10)+"px".toString();
                               // Add additional code here, such as:
                               item41_right=(parseInt(item41[2])+parseInt(item41[0]))+"px".toString();
                               item41_bottom=(parseInt(item41[3])+parseInt(item41[1]/10))+"px".toString();
                               }
                             }

                             if(e.item55!="")
                               {
                                 document.getElementById("item51").value = e.item51;

                                 var item51 = e.item55.split(',');

                                 for(var i = 0; i < item51.length; i++) {
                                 // Trim the excess whitespace.
                                 item51_left=item51[0]+"px".toString();
                                 item51_top=(item51[1]/10)+"px".toString();
                                 // Add additional code here, such as:
                                 item51_right=(parseInt(item51[2])+parseInt(item51[0]))+"px".toString();
                                 item51_bottom=(parseInt(item51[3])+parseInt(item51[1]/10))+"px".toString();
                                 }
                               }




            });
        }
        else
        {


          // innovoicename_left="735.868px";
          // innovoicename_top="275.783px";
          // invoice_date_left="735.868px";
          // invoice_date_top="305.708px";
          // po_no_left="735.868px";
          // po_no_top="335.632px";
          // currency_left="735.868px";
          // currency_top="361.717px";
          // payment_terms_left="744.388px";
          // payment_terms_top="364.988px";
          // company_name_bf_left="739.125px";
          // company_name_bf_top="97.275px";
          // ph_bf_left="730.095px";
          // ph_bf_top="195.825px";
          // company_name_bt_left="32.25px";
          // company_name_bt_top="290.1px";
          // email_bt_left="32.25px";
          // email_bt_top="405.075px";
          // gst_nt_left="32.25px";
          // gst_nt_top= "1032.98px";
          // sac_nt_left="32.25px";
          // sac_nt_top="1052.41px";
          // gst_no_nt_left="32.25px";
          // gst_no_nt_top="1071.83px";

        }


        $('#myModal2').modal({
          dismissible: true
        });
        $('#myModal2').modal('close');



        }


        $("#imageupload").click(function () {
  //alert("DSs");
    $("#filePicker").click();
});
$("#imageupload1").click(function () {
//alert("DSs");
$("#filePicker").click();
});




          var invoiceleft = '';
          var invoicetop = '';
          var notes_vl = '';
          var notes_vt = '';
          var notes_vl1 = '';
          var notes_vt1 = '';
          var item_vl = '';
          var item_vt = '';
          var item_vl1 = '';
          var item_vt1 = '';
          var sitem_vl = '';
          var sitem_vt = '';
          var sitem_vl1 = '';
          var sitem_vt1 = '';
          var p = "";
          var q = "";
          var p = "";
          var a = "";

          var handleFileSelect = function(evt) {


            //console.log(innovoicename_left);
            //console.log(innovoicename_top);
            document.getElementById("div").style.display = "none";
            document.getElementById("innovoicename").value = '';
            document.getElementById("invoice_date").value = '';
            document.getElementById("po_no").value = '';
            document.getElementById("currency").value = '';
            document.getElementById("payment_terms").value = '';


            document.getElementById("gst_nt").value = '';

            document.getElementById("sac_nt").value = '';

            document.getElementById("gst_no_nt").value = '';

            // document.getElementById("company_name_bt").value = '';
            //
            // document.getElementById("email_bt").value = '';
            //
            // document.getElementById("address_bt").value = '';
            //
            // document.getElementById("company_name_bf").value = '';
            //
            // document.getElementById("ph_bf").value = '';
            //
            // document.getElementById("address_bf").value = '';
            //



                        document.getElementById("supplier_name").value = '';

                        document.getElementById("supplier_gstin").value = '';

                        document.getElementById("supplier_state").value = '';

                        document.getElementById("place_of_supply").value = '';

                        document.getElementById("item_starts").value = '';

                        document.getElementById("item_ends").value = '';

                        document.getElementById("subtotal").value = '';

                        document.getElementById("total").value = '';

                        document.getElementById("netamount").value = '';

    document.getElementById("item1").value = '';
        document.getElementById("item2").value = '';
            document.getElementById("item3").value = '';
                document.getElementById("item4").value = '';
                    document.getElementById("item5").value = '';

            // document.getElementById("innvoiceamount").value='';

            //alert(document.getElementById("invoiceleft").value);

if(evt.type=="change")
{
  var files = evt.target.files;
  var file = files[0];
  var files111 = evt.target.files;
file111 = files[0];
}
else {
  var files = evt.originalEvent.dataTransfer.files;
  var file = files[0];
  var files111 = evt.originalEvent.dataTransfer.files;
file111 = files[0];
}


            if (files && file) {
              var reader = new FileReader();
//console.log("sdsd");
              reader.onload = function(readerEvt) {
                //console.log("sdsd1");
                var binaryString = readerEvt.target.result;
                document.getElementById("base64textarea").value = btoa(binaryString);
                ////console.log(btoa(binaryString));

                //////////////////////


                ////console.log(document.getElementById("base64textarea").value);
                ////////////////////////



                var pdfData = atob(btoa(binaryString));

                // Disable workers to avoid yet another cross-origin issue (workers need
                // the URL of the script to be loaded, and dynamically loading a cross-origin
                // script does not work).
                // PDFJS.disableWorker = true;

                // The workerSrc property shall be specified.
                // PDFJS.workerSrc = 'http:////mozilla.github.io/pdf.js/build/pdf.worker.js';
PDFJS.workerSrc ='../pdfjs/build/pdf.worker.js';
// ../build/pdf.worker.js
                // Using DocumentInitParameters object to load binary data.
                var loadingTask = PDFJS.getDocument({
                  data: pdfData
                });
                loadingTask.promise.then(function(pdf) {
                  //console.log('PDF loaded');

                  // Fetch the first page
                  var pageNumber = 1;
                  pdf.getPage(pageNumber).then(function(page) {
                    ////console.log('Page loaded');

                    var scale = 1.5;
                    var viewport = page.getViewport(scale);

                    // Prepare canvas using PDF page dimensions
                    var canvas = document.getElementById('the-canvas');
                    var context = canvas.getContext('2d');


                    ////console.log("context");
                    //console.log(context);
                    //canvas.height="900";
                    canvas.height = "1110";
                    canvas.width = "1204";
                    canvas.height = viewport.height;
                    canvas.width = viewport.width;
                    // canvas.height = "888";
                    // canvas.width = "952";
                    canvas.height = "1230";
                    canvas.width = "904";
                    var renderContext = {
                      canvasContext: context,
                      viewport: viewport
                    };
                    var renderTask = page.render(renderContext);
                    renderTask.then(function() {
                      ////console.log('Page rendered');
                    });


                    var ctx = document.createElement('canvas').getContext('2d', {
                      alpha: false
                    });




                    var pageContainer = document.getElementById('text-overlay');
                    pageContainer.classList.add('page-container');
                    pageContainer.style.width = viewport.width + 'px';
                    pageContainer.style.height = viewport.height + 'px';

                    page.getTextContent({
                      normalizeWhitespace: true
                    }).then(function(textContent) {

                      textContent.items.forEach(function(textItem) {
                        var tx = PDFJS.Util.transform(
                          PDFJS.Util.transform(viewport.transform, textItem.transform), [1, 0, 0, -1, 0, 0]
                        );

                        var style = textContent.styles[textItem.fontName];

                        var fontSize = Math.sqrt((tx[2] * tx[2]) + (tx[3] * tx[3]));

                        if (style.ascent) {
                          tx[5] -= fontSize * style.ascent;
                        } else if (style.descent) {
                          tx[5] -= fontSize * (1 + style.descent);
                        } else {
                          tx[5] -= fontSize / 2;
                        }

                        if (textItem.width > 0) {
                          ctx.font = tx[0] + 'px ' + style.fontFamily;

                          var width = ctx.measureText(textItem.str).width;
                          ////console.log(width);
                          if (width > 0) {
                            tx[0] = (textItem.width * viewport.scale) / width;
                          }
                        }

                        var item = document.createElement('span');
                        item.textContent = textItem.str === 'Adobe Acrobat PDF Files' ? 'Burp!' : textItem.str;
                        item.style.fontFamily = style.fontFamily;
                        item.style.fontSize = fontSize + 'px';
                        item.style.transform = 'scaleX(' + tx[0] + ')';
                        item.style.left = tx[4] + 'px';
                        item.style.top = tx[5] + 'px';

                        pageContainer.appendChild(item);
                      });
                    });
                    var pageContainer = document.getElementById('text-overlay');
                    pageContainer.classList.add('page-container');
                    pageContainer.style.width = viewport.width + 'px';
                    //   pageContainer.style.width = '100px';
                    pageContainer.style.height = viewport.height + 'px';
                    //   pageContainer.style.height="100px";
                    //  alert(  pageContainer.style.width);
                    //  alert(  pageContainer.style.height);

                    page.getTextContent({
                      normalizeWhitespace: true
                    }).then(function(textContent) {
                      var fruits = [];

                      textContent.items.forEach(function(textItem) {
                        //console.log("textItem");
                        //console.log(textItem);
                        //console.log("textItem");
                        var tx = PDFJS.Util.transform(
                          PDFJS.Util.transform(viewport.transform, textItem.transform), [1, 0, 0, -1, 0, 0]
                        );

                        var style = textContent.styles[textItem.fontName];

                        var fontSize = Math.sqrt((tx[2] * tx[2]) + (tx[3] * tx[3]));

                        if (style.ascent) {
                          tx[5] -= fontSize * style.ascent;
                        } else if (style.descent) {
                          tx[5] -= fontSize * (1 + style.descent);
                        } else {
                          tx[5] -= fontSize / 2;
                        }

                        if (textItem.width > 0) {
                          ctx.font = tx[0] + 'px ' + style.fontFamily;

                          var width = ctx.measureText(textItem.str).width;

                          if (width > 0) {
                            tx[0] = (textItem.width * viewport.scale) / width;
                          }
                        }

                        var item = document.createElement('span');
                        //item.textContent = textItem.str === 'Hello, world!' ? 'Burp!' : textItem.str;

                        item.style.left = tx[4] + 'px';
                        item.style.top = tx[5] + 'px';



                        //  Getting values from pdf and appending into text box

                        var lft = item.style.left;
                        var top = item.style.top;
                        var lft1 = Math.round(item.style.left);
                        var top1 = Math.round(item.style.top);
                        // alert(lft);
                        // alert(top);
                        // document.getElementById("invoiceleft").value
                        //   document.getElementById("invoicetop").value

                        if (invoiceleft == '') {

                          ////console.log(document.getElementById("newinnovoicename"));
                          if (textItem.str == "TP2139") {
                            invoiceleft = item.style.left;
                            invoicetop = item.style.top;
                            //  alert(invoiceleft);
                            //  alert(invoicetop);
                            document.getElementById("invoiceleft").value = invoiceleft;
                            document.getElementById("invoicetop").value = invoicetop;
                            // alert("Your invoice number top and left pxs are:" + item.style.left + "," +
                            //     item.style.top);

                          }
                        }
                        if ((parseInt(lft, 10) >= parseInt(c_left, 10) && parseInt(lft, 10) <= parseInt(c_right, 10)) && (parseInt(top, 10) >= parseInt(c_top, 10) && parseInt(top, 10) <= parseInt(c_bottom, 10))) {
                          //  //console.log("Invoice number");
                          document.getElementById("innovoicename").value = textItem.str;

                        }

                        var canvas = document.getElementById('the-canvas');
                        var context = canvas.getContext('2d');
                        // context.strokeStyle = '#e97f31';
                        //
                        // context.strokeRect(332, 650, 275, 120);
                        // context.strokeRect(22, 500, 205, 100);
                        //  context.strokeRect(490, 535, 53, 11);
                        //
                        // context.strokeRect(490, 595, 50, 20);
                        // context.strokeRect(490, 575, 90, 20);
                        // context.strokeRect(490, 555, 90, 20);
                        // context.strokeRect(490, 540, 55, 10);


                        //console.log(parseInt(innovoicename_left, 10));
                        //console.log(parseInt(innovoicename_top, 10));
                        //console.log(parseInt(innovoicename_right, 10));
                        //console.log(parseInt(innovoicename_bottom, 10));
                        //console.log(parseInt(lft, 10));
                        //console.log(parseInt(top, 10));


if(innovoicename_right!='')
{
                        if ((parseInt(lft, 10) >= parseInt(innovoicename_left, 10) && parseInt(lft, 10) <= parseInt(innovoicename_right, 10)) && (parseInt(top, 10) >= parseInt(innovoicename_top, 10) && parseInt(top, 10) <= parseInt(innovoicename_bottom, 10))) {

                          document.getElementById("innovoicename").value = textItem.str;

                        }
                      }
                      else
                      {
                        if ((lft == innovoicename_left) && (top == innovoicename_top)) {
                          //  //console.log("Invoice number");
                          document.getElementById("innovoicename").value = textItem.str;

                        }

                      }



                      if(invoice_date_bottom!='')
                      {
                                              if ((parseInt(lft, 10) >= parseInt(invoice_date_left, 10) && parseInt(lft, 10) <= parseInt(invoice_date_right, 10)) && (parseInt(top, 10) >= parseInt(invoice_date_top, 10) && parseInt(top, 10) <= parseInt(invoice_date_bottom, 10))) {

                                                document.getElementById("invoice_date").value = textItem.str;

                                              }
                                            }
                                            else
                                            {
                        if ((lft == invoice_date_left) && (top == invoice_date_top)) {
                          //  //console.log("Invoice number");
                          document.getElementById("invoice_date").value = textItem.str;

                        }
                      }




                      if(PaymentDue_right!='')
                      {
                                              if ((parseInt(lft, 10) >= parseInt(PaymentDue_left, 10) && parseInt(lft, 10) <= parseInt(PaymentDue_right, 10)) && (parseInt(top, 10) >= parseInt(PaymentDue_top, 10) && parseInt(top, 10) <= parseInt(PaymentDue_bottom, 10))) {

                                                document.getElementById("po_no").value = textItem.str;

                                              }
                                            }
                                            else
                                            {
                        if ((lft == PaymentDue_left) && (top == PaymentDue_top)) {
                          ////console.log("Order number");
                          document.getElementById("po_no").value = textItem.str;

                        }
                      }



if(AmountDue_right!='')
{
                        if ((parseInt(lft, 10) >= parseInt(AmountDue_left, 10) && parseInt(lft, 10) <= parseInt(AmountDue_right, 10)) && (parseInt(top, 10) >= parseInt(AmountDue_top, 10) && parseInt(top, 10) <= parseInt(AmountDue_bottom, 10))) {

                          document.getElementById("payment_terms").value = textItem.str;

                        }
                      }
                      else
                      {
                        if ((lft == AmountDue_left) && (top == AmountDue_top)) {
                          //  //console.log("Invoice Due Date");
                          document.getElementById("payment_terms").value = textItem.str;

                        }
}
                        //
                        // //console.log(parseInt(lft, 10)+">="+parseInt(company_name_bf_left, 10)+"&&"+parseInt(lft, 10)+"<="+parseInt(company_name_bf_right, 10));
                        // //console.log(parseInt(top, 10)+">="+parseInt(company_name_bf_top, 10)+"&&"+parseInt(top, 10)+"<="+parseInt(company_name_bf_bottom, 10));




                        if(supplier_name_right!='')
                        {
                                                if ((parseInt(lft, 10) >= parseInt(supplier_name_left, 10) && parseInt(lft, 10) <= parseInt(supplier_name_right, 10)) && (parseInt(top, 10) >= parseInt(supplier_name_top, 10) && parseInt(top, 10) <= parseInt(supplier_name_bottom, 10))) {

                                                  document.getElementById("supplier_name").value = textItem.str;

                                                }
                                              }
                                              else
                                              {
                                                if ((lft == supplier_name_left) && (top == supplier_name_top)) {
                                                  //  //console.log("Invoice Due Date");
                                                  document.getElementById("supplier_name").value = textItem.str;

                                                }
                        }


                        if(supplier_gstin_right!='')
                        {
                                                if ((parseInt(lft, 10) >= parseInt(supplier_gstin_left, 10) && parseInt(lft, 10) <= parseInt(supplier_gstin_right, 10)) && (parseInt(top, 10) >= parseInt(supplier_gstin_top, 10) && parseInt(top, 10) <= parseInt(supplier_gstin_bottom, 10))) {

                                                  document.getElementById("supplier_gstin").value = textItem.str;

                                                }
                                              }
                                              else
                                              {
                                                if ((lft == supplier_gstin_left) && (top == supplier_gstin_top)) {
                                                  //  //console.log("Invoice Due Date");
                                                  document.getElementById("supplier_gstin").value = textItem.str;

                                                }
                        }


                        if(supplier_state_right!='')
                        {
                                                if ((parseInt(lft, 10) >= parseInt(supplier_state_left, 10) && parseInt(lft, 10) <= parseInt(supplier_state_right, 10)) && (parseInt(top, 10) >= parseInt(supplier_state_top, 10) && parseInt(top, 10) <= parseInt(supplier_state_bottom, 10))) {

                                                  document.getElementById("supplier_state").value = textItem.str;

                                                }
                                              }
                                              else
                                              {
                                                if ((lft == supplier_state_left) && (top == supplier_state_top)) {
                                                  //  //console.log("Invoice Due Date");
                                                  document.getElementById("supplier_state").value = textItem.str;

                                                }
                        }


                        if(place_of_supply_right!='')
                        {
                                                if ((parseInt(lft, 10) >= parseInt(place_of_supply_left, 10) && parseInt(lft, 10) <= parseInt(place_of_supply_right, 10)) && (parseInt(top, 10) >= parseInt(place_of_supply_top, 10) && parseInt(top, 10) <= parseInt(place_of_supply_bottom, 10))) {

                                                  document.getElementById("place_of_supply").value = textItem.str;

                                                }
                                              }
                                              else
                                              {
                                                if ((lft == place_of_supply_left) && (top == place_of_supply_top)) {
                                                  //  //console.log("Invoice Due Date");
                                                  document.getElementById("place_of_supply").value = textItem.str;

                                                }
                        }

if (textItem.str == item_starts_key) {
 document.getElementById("item_starts").value = textItem.str;

}
if (textItem.str == item_ends_key) {
  document.getElementById("item_ends").value = textItem.str;
}



if(subtotal_right!='')
{

                        if ((parseInt(lft, 10) >= parseInt(subtotal_left, 10) && parseInt(lft, 10) <= parseInt(subtotal_right, 10)) && (parseInt(top, 10) >= parseInt(subtotal_top, 10) && parseInt(top, 10) <= parseInt(subtotal_bottom, 10))) {

                          document.getElementById("subtotal").value = textItem.str;

                        }
                      }
                      else
                      {
                        if ((lft == subtotal_left) && (top == subtotal_top)) {
                          //  //console.log("Invoice Due Date");
                          document.getElementById("subtotal").value = textItem.str;

                        }
}



if(total_right!='')
{
                        if ((parseInt(lft, 10) >= parseInt(total_left, 10) && parseInt(lft, 10) <= parseInt(total_right, 10)) && (parseInt(top, 10) >= parseInt(total_top, 10) && parseInt(top, 10) <= parseInt(total_bottom, 10))) {

                          document.getElementById("total").value = textItem.str;

                        }
                      }
                      else
                      {
                        if ((lft == total_left) && (top == total_top)) {
                          //  //console.log("Invoice Due Date");
                          document.getElementById("total").value = textItem.str;

                        }
}
if(netamount_right!='')
{
                        if ((parseInt(lft, 10) >= parseInt(netamount_left, 10) && parseInt(lft, 10) <= parseInt(netamount_right, 10)) && (parseInt(top, 10) >= parseInt(netamount_top, 10) && parseInt(top, 10) <= parseInt(netamount_bottom, 10))) {

                          document.getElementById("netamount").value = textItem.str;

                        }
                      }
                      else
                      {
                        if ((lft == netamount_left) && (top == netamount_top)) {
                          //  //console.log("Invoice Due Date");
                          document.getElementById("netamount").value = textItem.str;

                        }
}


if(item11_right!='')
{

                        if ((parseInt(lft, 10) >= parseInt(item11_left, 10) && parseInt(lft, 10) <= parseInt(item11_right, 10)) && (parseInt(top, 10) >= parseInt(item11_top, 10) && parseInt(top, 10) <= parseInt(item11_bottom, 10))) {
                          // console.log(item11_left);
                          // console.log(item11_right);
                          // console.log(item11_top);
                          // console.log(item11_bottom);
                          // console.log(textItem.str);
                          document.getElementById("item1").value = textItem.str;

                        }
                      }
                      else
                      {
                        if ((lft == item11_left) && (top == item11_top)) {
                          //  //console.log("Invoice Due Date");
                          document.getElementById("item1").value = textItem.str;

                        }
}
if(item21_right!='')
{
                        if ((parseInt(lft, 10) >= parseInt(item21_left, 10) && parseInt(lft, 10) <= parseInt(item21_right, 10)) && (parseInt(top, 10) >= parseInt(item21_top, 10) && parseInt(top, 10) <= parseInt(item21_bottom, 10))) {

                          document.getElementById("item2").value = textItem.str;

                        }
                      }
                      else
                      {
                        if ((lft == item21_left) && (top == item21_top)) {
                          //  //console.log("Invoice Due Date");
                          document.getElementById("item2").value = textItem.str;

                        }
}

if(item31_right!='')
{
                        if ((parseInt(lft, 10) >= parseInt(item31_left, 10) && parseInt(lft, 10) <= parseInt(item31_right, 10)) && (parseInt(top, 10) >= parseInt(item31_top, 10) && parseInt(top, 10) <= parseInt(item31_bottom, 10))) {

                          document.getElementById("item3").value = textItem.str;

                        }
                      }
                      else
                      {
                        if ((lft == item31_left) && (top == item31_top)) {
                          //  //console.log("Invoice Due Date");
                          document.getElementById("item3").value = textItem.str;

                        }
}


if(item41_right!='')
{
                        if ((parseInt(lft, 10) >= parseInt(item41_left, 10) && parseInt(lft, 10) <= parseInt(item41_right, 10)) && (parseInt(top, 10) >= parseInt(item41_top, 10) && parseInt(top, 10) <= parseInt(item41_bottom, 10))) {

                          document.getElementById("item4").value = textItem.str;

                        }
                      }
                      else
                      {
                        if ((lft == item41_left) && (top == item41_top)) {
                          //  //console.log("Invoice Due Date");
                          document.getElementById("item4").value = textItem.str;

                        }
}
if(item51_right!='')
{
                        if ((parseInt(lft, 10) >= parseInt(item51_left, 10) && parseInt(lft, 10) <= parseInt(item51_right, 10)) && (parseInt(top, 10) >= parseInt(item51_top, 10) && parseInt(top, 10) <= parseInt(item51_bottom, 10))) {

                          document.getElementById("item5").value = textItem.str;

                        }
                      }
                      else
                      {
                        if ((lft == item51_left) && (top == item51_top)) {
                          //  //console.log("Invoice Due Date");
                          document.getElementById("item5").value = textItem.str;

                        }
}




if (textItem.str == item_starts_key) {

  item_vl = item.style.left;
  item_vtr = item.style.top;
  item_vt = item_vt + item_vtr;

  item_vl1 = (parseInt(item_vl.replace(/px/, "")) + 50) + "px"
  item_vt1 = (parseInt(item_vt.replace(/px/, ""))) + "px"

}

if (textItem.str == item_ends_key) {

  sitem_vl = item.style.left;
  sitem_vtr = item.style.top;
  sitem_vt = sitem_vt + sitem_vtr;

  sitem_vl1 = (parseInt(sitem_vl.replace(/px/, "")) + 50) + "px"
  sitem_vt1 = (parseInt(sitem_vt.replace(/px/, ""))) + "px"


}


if (item_vt != "") {
  // alert(item_vt);
  // alert(notes_vt);
  //  if((top>=item_vt && top<=notes_vt ))
  if (item_vt > sitem_vt) {
    // alert(item_vt);
    // alert(notes_vt);
// console.log(textItem);
//  console.log("p");
    // alert(textItem.str);
    var i1=$('#item1').val();
    var i2=$('#item2').val();
    var i3=$('#item3').val();
    var i4=$('#item4').val();
    var i5=$('#item5').val();
    if (textItem.str != i1 && textItem.str != i2 && textItem.str != i3 && textItem.str != i4) {


      var table = document.getElementById("item_tb");
      var row = table.insertRow(-1);
      var cell1 = row.insertCell(0);
      var cell2 = row.insertCell(1);
      var cell3 = row.insertCell(2);
      var cell4 = row.insertCell(3);

      // if ((parseInt(lft, 10)) <= parseInt(item41_left, 10)) {
      //
      //   p = $("#item_tb").find("tr").length;
      //
      //
      // }

if((parseInt(lft, 10) >= parseInt(item11_left, 10) && parseInt(lft, 10) <= parseInt(item11_right, 10)))
      {
        // if(textItem.str!=$('#item1').val()){
        var f_c=textItem.str;
p = $("#item_tb").find("tr").length;

  //  var x = document.getElementById("item_tb").rows[p-1].cells;
        //x[0].innerHTML = textItem.str;
r=p;
        // console.log(x[3].innerText);
// r1=1;
// console.log("r1");
// console.log(r1);
// console.log(textItem.str);


if(r1==2){
  console.log(r);
  var x = document.getElementById("item_tb").rows[p-2].cells;
//  console.log(x);
// var newCell   = x.insertCell(0);

var newText  = document.createTextNode(textItem.str)
x[0].appendChild(newText);
// console.log(r1);
}
if(r1==0)
{
  // console.log(p);
//console.log(textItem.str);
  var x = document.getElementById("item_tb").rows[p-1].cells;

x[0].innerHTML = textItem.str+",";
r1=2;
// console.log(r1);
// console.log(r1);
}


if(r1==1){
// console.log(r1);
  var x = document.getElementById("item_tb").rows[1].cells;
//  console.log(x);
// var newCell   = x.insertCell(0);

var newText  = document.createTextNode(textItem.str)
x[0].appendChild(newText);

}

      }

      if ((parseInt(lft, 10) >= parseInt(item21_left, 10)) && (parseInt(lft, 10) <= parseInt(item21_right, 10))) {

        $('tr').each(function () {
                      $(this).find('td:first').each(function () {
                          if ($(this).text().trim() == "") {
                              $(this).closest("tr").remove();
                          };
                      });
                  });
p1 = $("#item_tb").find("tr").length;

          var x = document.getElementById("item_tb").rows[p1-1].cells;
          x[1].innerHTML = textItem.str;
          //cell3.innerHTML =textItem.str;
r1=0;
// console.log(r);
// console.log(p1);
// console.log(r1);
      }


      if ((parseInt(lft, 10) >= parseInt(item31_left, 10)) && (parseInt(lft, 10) <= parseInt(item31_right, 10))) {
        var regex = /^[a-zA-Z0-9- ]/;
console.log(p);
        if(regex.test(textItem.str) == true) {

          var x = document.getElementById("item_tb").rows[p1-1].cells;
          x[2].innerHTML = textItem.str;
          //cell3.innerHTML =textItem.str;

                        //  console.log(textItem.str);
                        }
// console.log(r1);
r1=0;
      }
      if ((parseInt(lft, 10) >= parseInt(item41_left, 10)) && (parseInt(lft, 10) <= parseInt(item41_right, 10))) {

          var x = document.getElementById("item_tb").rows[p1-1].cells;
          x[3].innerHTML = textItem.str;
          //cell3.innerHTML =textItem.str;

r1=0;

      }





    }

  }


}






                        if ((lft == gst_nt_left) && (top ==gst_nt_top)) {
                          //  //console.log("Invoice Due Date");
                          document.getElementById("gst_nt").value = textItem.str;

                        }
                        if ((lft == sac_nt_left) && (top == sac_nt_top)) {
                          //  //console.log("Invoice Due Date");
                          document.getElementById("sac_nt").value = textItem.str;

                        }
                        if ((lft == gst_no_nt_left) && (top == gst_no_nt_top)) {
                          //  //console.log("Invoice Due Date");
                          document.getElementById("gst_no_nt").value = textItem.str;

                        }




                        fruits.push(item.textContent);

                        item.style.fontFamily = style.fontFamily;
                        item.style.fontSize = fontSize + 'px';
                        item.style.transform = 'scaleX(' + tx[0] + ')';
                        item.style.left = tx[4] + 'px';
                        item.style.top = tx[5] + 'px';


                        //               var canvas = document.getElementById('the-canvas');
                        //               var context = canvas.getContext('2d');
                        // var fullQuality = canvas.toDataURL('image/jpeg', 1.0);
                        //
                        //             //console.log(fullQuality);
                        //             var cnvs=document.getElementById('img');
                        //                      cnvs.src=fullQuality;



                        pageContainer.appendChild(item);
                        //console.log(lft);
                        //console.log(top);
                        //console.log("fdfdf");
                        //console.log(textItem.str);
                        //console.log(item.style.left);
                        //console.log(item.style.left = tx[4] + 'px');
                        //console.log(item.style.top = tx[5] + 'px');
                      });


                    });








                  });
                }, function(reason) {

                  //console.error(reason);
                });

              };

              reader.readAsBinaryString(file);


            }









          };


                      var canvas, ctx, flag = false,
                        prevX = 0,
                        currX = 0,
                        prevY = 0,
                        currY = 0,
                        currShape = 'rectangle',
                        mouseIsDown = 0,
                        startX, endX, startY, endY,
                        dot_flag = false;
                      var x = "#385749",
                        y = 2,
                        image = null;

                      ////console.log(canvas.toDataURL());
                      canvas = document.getElementById('the-canvas');
                      ctx = canvas.getContext("2d");




                      ctx.strokeStyle = '#e97f31';

                      // ctx.strokeRect(332, 650, 275, 120);
                      // ctx.strokeRect(22, 500, 205, 100);
                      //  ctx.strokeRect(490, 535, 53, 11);
                      //
                      // ctx.strokeRect(490, 595, 50, 20);
                      // ctx.strokeRect(490, 575, 90, 20);
                      // ctx.strokeRect(490, 555, 90, 20);
                      ctx.strokeRect(734, 2740, 55, 10);



                      // canvas.height = "1118";
                      // canvas.width = "918";
                      w = canvas.width; // Canvas Width
                      h = canvas.height; // Canvas Height

                      //Check Shape to be draw
                      //Check Shape to be draw
                      eventListener();

                      function eventListener() {

                        if (currShape == 'rectangle') {
                          canvas.addEventListener("mousedown", function(e) {
                            var canvas1 =  document.getElementById("the-canvas");
                            var dataURL = canvas1.toDataURL();
                            var cnvs=document.getElementById('img');
                                  cnvs.src=dataURL;

                            mouseDown1(e);
                          }, false);
                          canvas.addEventListener("mousemove", function(e) {
                            mouseXY1(e);
                          }, false);
                          canvas.addEventListener("mouseup", function(e) {
                            mouseUp1(e);
                          }, false);
                        }
                        canvas.addEventListener("click", function(e) {

                          onClick1(e);
                        }, false);

                      }

                      function mouseUp1(eve) {
                        if (mouseIsDown !== 0) {
                          mouseIsDown = 0;
                          var pos = getMousePos(canvas, eve);
                          endX = pos.x;
                          endY = pos.y;
                          if (currShape == 'rectangle') {
                            drawSquare(); //update on mouse-up
                          }
                        }
                      }

                      function mouseDown1(eve) {
                        mouseIsDown = 1;

                        var pos = getMousePos(canvas, eve);
                        startX = endX = pos.x;
                        startY = endY = pos.y;
                        if (currShape == 'rectangle') {
                          drawSquare(); //update on mouse-up
                        }
                      }

                      function mouseXY1(eve) {
                        if (mouseIsDown !== 0) {
                          var pos = getMousePos(canvas, eve);
                          endX = pos.x;
                          endY = pos.y;
                          drawSquare();
                        }
                      }

                      function drawSquare() {
                        // var canvas1 =  document.getElementById("the-canvas");
                        // var dataURL = canvas1.toDataURL();
                        // var cnvs=document.getElementById('img');
                        //          cnvs.src=dataURL;
                        var image_c = document.getElementById('img');
                        ctx.drawImage(image_c, 0, 0);

                        // creating a square
                        var w = endX - startX;
                        var h = endY - startY;

                        var offsetX = (w < 0) ? w : 0;
                        var offsetY = (h < 0) ? h : 0;
                        var width = Math.abs(w);
                        var height = Math.abs(h);

                        ctx.beginPath();
                        ctx.globalAlpha = 0.7;
                        ctx.strokeRect(startX + offsetX, startY + offsetY, width, height);

                        ctx.fillStyle = x;
                        ctx.fill();
                        ctx.lineWidth = y;
                        ctx.strokeStyle = x;
                        ctx.stroke();


                        //console.log(startX + offsetX, startY + offsetY, width, height)
                        value_tl = startX + offsetX + "," + startY + offsetY + "," + width + "," + height;
                        //console.log(value_tl);
                        //console.log(focus_input);
  //console.log("focus_input");
                        document.getElementById(focus_input+'1').value=value_tl;
                        if(focus_input=="item1")
                        {
                        document.getElementById(focus_input+'1').value=value_tl;
                        }
                        if(focus_input=="item2")
                        {
                        document.getElementById(focus_input+'1').value=value_tl;
                        }
                        if(focus_input=="item3")
                        {
                        document.getElementById(focus_input+'1').value=value_tl;
                        }
                        if(focus_input=="item4")
                        {
                        document.getElementById(focus_input+'1').value=value_tl;
                        }
                        if(focus_input=="item5")
                        {
                        document.getElementById(focus_input+'1').value=value_tl;
                        }

c_left=startX + offsetX;
c_top=startY + offsetY;
c_right=startX + offsetX+width;
c_bottom=startY + offsetY+height;


                      }

                      function onClick1(e) {

                        // $('#myModal').modal({
                        //   dismissible: true
                        // });
                        // $('#myModal').modal('open');

                        var reader = new FileReader();


                        reader.onload = function(readerEvt) {
                          var binaryString = readerEvt.target.result;
                          document.getElementById("base64textarea").value = btoa(binaryString);
                          ////console.log(btoa(binaryString));

                          //////////////////////


                          ////console.log(document.getElementById("base64textarea").value);
                          ////////////////////////



                          var pdfData = atob(btoa(binaryString));

                          // Disable workers to avoid yet another cross-origin issue (workers need
                          // the URL of the script to be loaded, and dynamically loading a cross-origin
                          // script does not work).
                          // PDFJS.disableWorker = true;

                          // The workerSrc property shall be specified.
                          PDFJS.workerSrc = 'http:////mozilla.github.io/pdf.js/build/pdf.worker.js';

                          // Using DocumentInitParameters object to load binary data.
                          var loadingTask = PDFJS.getDocument({
                            data: pdfData
                          });
                          loadingTask.promise.then(function(pdf) {
                            //console.log('PDF loaded');

                            // Fetch the first page
                            var pageNumber = 1;
                            pdf.getPage(pageNumber).then(function(page) {
                              ////console.log('Page loaded');

                              var scale = 1.5;
                              var viewport = page.getViewport(scale);

                              // Prepare canvas using PDF page dimensions
                              var canvas = document.getElementById('the-canvas');
                              var context = canvas.getContext('2d');


                              ////console.log("context");
                              //console.log(context);
                              //canvas.height="900";
                              canvas.height = "1110";
                              canvas.width = "1204";
                              canvas.height = viewport.height;
                              canvas.width = viewport.width;
                              // canvas.height = "888";
                              // canvas.width = "952";
                              canvas.height = "1230";
                              canvas.width = "904";
                              var renderContext = {
                                canvasContext: context,
                                viewport: viewport
                              };
                              var renderTask = page.render(renderContext);
                              renderTask.then(function() {
                                ////console.log('Page rendered');
                              });


                              var ctx = document.createElement('canvas').getContext('2d', {
                                alpha: false
                              });




                              var pageContainer = document.getElementById('text-overlay');
                              pageContainer.classList.add('page-container');
                              pageContainer.style.width = viewport.width + 'px';
                              pageContainer.style.height = viewport.height + 'px';

                              page.getTextContent({
                                normalizeWhitespace: true
                              }).then(function(textContent) {

                                textContent.items.forEach(function(textItem) {
                                  var tx = PDFJS.Util.transform(
                                    PDFJS.Util.transform(viewport.transform, textItem.transform), [1, 0, 0, -1, 0, 0]
                                  );

                                  var style = textContent.styles[textItem.fontName];

                                  var fontSize = Math.sqrt((tx[2] * tx[2]) + (tx[3] * tx[3]));

                                  if (style.ascent) {
                                    tx[5] -= fontSize * style.ascent;
                                  } else if (style.descent) {
                                    tx[5] -= fontSize * (1 + style.descent);
                                  } else {
                                    tx[5] -= fontSize / 2;
                                  }

                                  if (textItem.width > 0) {
                                    ctx.font = tx[0] + 'px ' + style.fontFamily;

                                    var width = ctx.measureText(textItem.str).width;
                                    ////console.log(width);
                                    if (width > 0) {
                                      tx[0] = (textItem.width * viewport.scale) / width;
                                    }
                                  }

                                  var item = document.createElement('span');
                                  item.textContent = textItem.str === 'Adobe Acrobat PDF Files' ? 'Burp!' : textItem.str;
                                  item.style.fontFamily = style.fontFamily;
                                  item.style.fontSize = fontSize + 'px';
                                  item.style.transform = 'scaleX(' + tx[0] + ')';
                                  item.style.left = tx[4] + 'px';
                                  item.style.top = tx[5] + 'px';

                                  pageContainer.appendChild(item);
                                });
                              });
                              var pageContainer = document.getElementById('text-overlay');
                              pageContainer.classList.add('page-container');
                              pageContainer.style.width = viewport.width + 'px';
                              //   pageContainer.style.width = '100px';
                              pageContainer.style.height = viewport.height + 'px';
                              //   pageContainer.style.height="100px";
                              //  alert(  pageContainer.style.width);
                              //  alert(  pageContainer.style.height);

                              page.getTextContent({
                                normalizeWhitespace: true
                              }).then(function(textContent) {
                                var fruits = [];

                                textContent.items.forEach(function(textItem) {
                                  //console.log("textItem");
                                  //console.log(textItem);
                                  //console.log("textItem");
                                  var tx = PDFJS.Util.transform(
                                    PDFJS.Util.transform(viewport.transform, textItem.transform), [1, 0, 0, -1, 0, 0]
                                  );

                                  var style = textContent.styles[textItem.fontName];

                                  var fontSize = Math.sqrt((tx[2] * tx[2]) + (tx[3] * tx[3]));

                                  if (style.ascent) {
                                    tx[5] -= fontSize * style.ascent;
                                  } else if (style.descent) {
                                    tx[5] -= fontSize * (1 + style.descent);
                                  } else {
                                    tx[5] -= fontSize / 2;
                                  }

                                  if (textItem.width > 0) {
                                    ctx.font = tx[0] + 'px ' + style.fontFamily;

                                    var width = ctx.measureText(textItem.str).width;

                                    if (width > 0) {
                                      tx[0] = (textItem.width * viewport.scale) / width;
                                    }
                                  }

                                  var item = document.createElement('span');
                                  //item.textContent = textItem.str === 'Hello, world!' ? 'Burp!' : textItem.str;

                                  item.style.left = tx[4] + 'px';
                                  item.style.top = tx[5] + 'px';



                                  //  Getting values from pdf and appending into text box

                                  var lft = item.style.left;
                                  var top = item.style.top;
                                  var lft1 = Math.round(item.style.left);
                                  var top1 = Math.round(item.style.top);
                                  // alert(lft);
                                  // alert(top);
                                  // document.getElementById("invoiceleft").value
                                  //   document.getElementById("invoicetop").value


                        // /alert(c_left);


                                                //console.log(parseInt(lft, 10)+">="+parseInt(c_left, 10)+"&&"+parseInt(lft, 10)+"<="+parseInt(c_right, 10));
                                                //console.log(parseInt(top, 10)+">="+parseInt(c_top, 10)+"&&"+parseInt(top, 10)+"<="+parseInt(c_bottom, 10));

                                  if ((parseInt(lft, 10) >= parseInt(c_left, 10) && parseInt(lft, 10) <= parseInt(c_right, 10)) && (parseInt(top, 10) >= parseInt(c_top, 10) && parseInt(top, 10) <= parseInt(c_bottom, 10))) {
                                    //console.log("Invoice number");

                                    //console.log("document.getElementById("+focus_input+").value");
//console.log("hi");
//console.log(focus_input);

                                    document.getElementById(focus_input).value = textItem.str;

                                    // if(focus_input=="netamount")
                                    // {
                                    // document.getElementById(focus_input+'1').value=textItem.str;
                                    // }
                                    // if(focus_input=="total")
                                    // {
                                    // document.getElementById(focus_input+'1').value=textItem.str;
                                    // }
                                    // if(focus_input=="subtotal")
                                    // {
                                    // document.getElementById(focus_input+'1').value=textItem.str;
                                    // }
                                    if(focus_input=="item_starts")
                                    {
                                      //console.log("hi");

                                    document.getElementById(focus_input+'1').value=textItem.str;
                                    }
                                    if(focus_input=="item_ends")
                                    {
                                    document.getElementById(focus_input+'1').value=textItem.str;
                                    }



                                  }

                                  var canvas = document.getElementById('the-canvas');
                                  var context = canvas.getContext('2d');


                                  fruits.push(item.textContent);

                                  item.style.fontFamily = style.fontFamily;
                                  item.style.fontSize = fontSize + 'px';
                                  item.style.transform = 'scaleX(' + tx[0] + ')';
                                  item.style.left = tx[4] + 'px';
                                  item.style.top = tx[5] + 'px';


                                  //               var canvas = document.getElementById('the-canvas');
                                  //               var context = canvas.getContext('2d');
                                  // var fullQuality = canvas.toDataURL('image/jpeg', 1.0);
                                  //
                                  //             //console.log(fullQuality);
                                  //             var cnvs=document.getElementById('img');
                                  //                      cnvs.src=fullQuality;



                                  pageContainer.appendChild(item);
                                  //console.log(lft);
                                  //console.log(top);
                                  //console.log("fdfdf");
                                  //console.log(textItem.str);
                                  //console.log(item.style.left);
                                  //console.log(item.style.left = tx[4] + 'px');
                                  //console.log(item.style.top = tx[5] + 'px');
                                });


                              });








                            });
                          }, function(reason) {

                            //console.error(reason);
                          });

                        };

                        reader.readAsBinaryString(file111);
                        //alert(e);
                        //$('#myModal').modal('show')


                      }

                      function getMousePos(canvas, evt) {
                        var rect = canvas.getBoundingClientRect();

                        return {
                          x: evt.clientX - rect.left,
                          y: evt.clientY - rect.top
                        };
                      }







          if (window.File && window.FileReader && window.FileList && window.Blob) {
            document.getElementById('filePicker').addEventListener('change', handleFileSelect, false);

          } else {
            alert('The File APIs are not fully supported in this browser.');
          }
        </script>

<script>
$.ajax({

    type: "GET",
    url: "http://localhost:3000/api/get_coordinates"
}).done(function (e) {
    //console.log(e.Result);

  var items="";
    $.each(e.Result, function (index, value) {
      //console.log(value.template_name);
       $("#save_existing_new").append("<option value="+value.template_name +">" +value.template_name + "</option>");
       $("#save_existing_new_l").append("<option value="+value.template_name +">" +value.template_name + "</option>");

      //  $('p').append(value + ' ');
    });
    $("#save_existing_new").append("<option value=dsds> dsdswwww</option>");
    $("#save_existing_new_l").append("<option value=dsds> dsdswwww</option>");




    //$("#save_existing_new").append(items);
});
var data;
$(document).ready(function () {
  (function ($) {
     $.fn.serializeFormJSON = function () {
       var o = {};
              var a = this.serializeArray();
              $.each(a, function () {
                  if (o[this.name]) {
                      if (!o[this.name].push) {
                          o[this.name] = [o[this.name]];
                      }
                      o[this.name].push(this.value || '');
                  } else {
                      o[this.name] = this.value || '';
                  }
              });
              return o;
          };
      })(jQuery);
    $('form[name="f_co"]').submit(function (e) {

      var txtFile = "http://localhost:3000/api/get_coordinates";



      e.preventDefault();





    //  alert("SDsd");

          // $('#myModal1').modal({
          //   dismissible: true
          // });
          // $('#myModal1').modal('open');

           data = $(this).serializeFormJSON();
           //console.log(data);
           if(document.getElementById("templatename11").value!='')
           {
             //console.log(data);
             data.template_name = document.getElementById("templatename11").value;
                      var txtFile = "http://localhost:3000/api/coordinates";

                      $.ajax({
                        type: "POST",
                        url: txtFile,
                        data: data,
                        dataType:"json",
                        success: function( data){
                                          //console.log( data );
                                        }
                                      });
           }
           else {
             //console.log(data);
             data.template_name = document.getElementById("save_existing_new_l").value;

             var dropdown=document.getElementById("save_existing_new_l").value;
                      var txtFile = "http://localhost:3000/api/coordinates_exist/"+dropdown;

                      $.ajax({
                        type: "PUT",
                        url: txtFile,
                        data: data,
                        dataType:"json",

                        success: function( data){
                                          //console.log( data );
                                        }
                                      });
           }
           //var data1 = JSON.stringify(data);

           var blob = new Blob( [ data ], {
               type: 'application/octet-stream'
           });



                       });


                       $('form[name="f_data"]').submit(function (e) {

                         var txtFile = "http://localhost:3000/api/get_coordinates";



                         e.preventDefault();





                       //  alert("SDsd");

                             // $('#myModal1').modal({
                             //   dismissible: true
                             // });
                             // $('#myModal1').modal('open');

                              data = $(this).serializeFormJSON();
                              //console.log(data);

                              //var data1 = JSON.stringify(data);
                              if(document.getElementById("templatename11").value!='')
                              {
                                //console.log(data);
                                data.template_name = document.getElementById("templatename11").value;
                                         var txtFile = "http://localhost:3000/api/data";

                                         $.ajax({
                                           type: "POST",
                                           url: txtFile,
                                           data: data,
                                           dataType:"json",
                                           success: function( data){
                                                             //console.log( data );
                                                           }
                                                         });
                              }
                              else {
                                //console.log(data);
                                data.template_name = document.getElementById("save_existing_new_l").value;

                                var dropdown=document.getElementById("save_existing_new_l").value;
                                         var txtFile = "http://localhost:3000/api/data_exist/"+dropdown;

                                         $.ajax({
                                           type: "PUT",
                                           url: txtFile,
                                           data: data,
                                           dataType:"json",

                                           success: function( data){
                                                             //console.log( data );
                                                           }
                                                         });
                              }
                              var blob = new Blob( [ data ], {
                                  type: 'application/octet-stream'
                              });



                                          });



});


function save_e_n_c()
{

  if(document.getElementById("save_existing_new").value=="new")
  {
document.getElementById('templatename').style.display = 'block';
  }


}

function save_e_n()
{

if(document.getElementById("templatename11").value!='')
{
  //console.log(data);
  data.template_name = document.getElementById("templatename11").value;


  data.template_name = document.getElementById("templatename11").value;

  data.template_name = document.getElementById("templatename11").value;

           var txtFile = "http://localhost:3000/api/coordinates";

           $.ajax({
             type: "POST",
             url: txtFile,
             data: data,
             dataType:"json",
             success: function( data){
                               //console.log( data );
                             }
                           });
}
else {
  //console.log(data);
  data.template_name = document.getElementById("save_existing_new_l").value;
  data.itemStarts = document.getElementById("item_starts").value;

  data.itemEnds = document.getElementById("item_ends").value;


  var dropdown=document.getElementById("save_existing_new").value;
           var txtFile = "http://localhost:3000/api/coordinates_exist/"+dropdown;

           $.ajax({
             type: "PUT",
             url: txtFile,
             data: data,
             dataType:"json",

             success: function( data){
                               //console.log( data );
                             }
                           });
}

}
$(window).on('load',function(){
  $('#myModal2').modal({
    dismissible: true
  });
    $('#myModal2').modal('open');
});



$('#sdsd').on(
    'dragover',
    function(e) {
    //  alert("DSd");
      var canvas = document.getElementById('the-canvas');
                  var context = canvas.getContext('2d');

      context.clearRect(0, 0, canvas.width, canvas.height);
    //  alert("sdfds");
        e.preventDefault();
        e.stopPropagation();
    }
)
$(document).bind('drop', function (e) {
//alert("sdfds");
// $("the-canvas").attr("src","")

// e.preventDefault();
var eventt=e;
//console.log(eventt);
handleFileSelect(eventt);
});



$(document).ready(function(){
    $('.gen_btn').click(function(){
//console.log("test");

            $.ajax({

                type: "GET",
                url: "http://localhost:3000/api/get_data"
            }).done(function (e) {
                //console.log(e.Result);

            var data111=e.Result;
            JSONToCSVConvertor(data111, "PDF Report", true);

                //$("#save_existing_new").append(items);
            });



    });
});

function JSONToCSVConvertor(JSONData, ReportTitle, ShowLabel) {
    //If JSONData is not an object then JSON.parse will parse the JSON string in an Object
    var arrData = typeof JSONData != 'object' ? JSON.parse(JSONData) : JSONData;

    var CSV = '';
    //Set Report title in first row or line

    CSV += ReportTitle + '\r\n\n';

    //This condition will generate the Label/Header
    if (ShowLabel) {
        var row = "";

        //This loop will extract the label from 1st index of on array
        for (var index in arrData[0]) {

            //Now convert each value to string and comma-seprated
            row += index + ',';
        }

        row = row.slice(0, -1);

        //append Label row with line break
        CSV += row + '\r\n';
    }

    //1st loop is to extract each row
    for (var i = 0; i < arrData.length; i++) {
        var row = "";

        //2nd loop will extract each column and convert it in string comma-seprated
        for (var index in arrData[i]) {
            row += '"' + arrData[i][index] + '",';
        }

        row.slice(0, row.length - 1);

        //add a line break after each row
        CSV += row + '\r\n';
    }

    if (CSV == '') {
        alert("Invalid data");
        return;
    }

    //Generate a file name
    var fileName = "MyReport_";
    //this will remove the blank-spaces from the title and replace it with an underscore
    fileName += ReportTitle.replace(/ /g,"_");

    //Initialize file format you want csv or xls
    var uri = 'data:text/csv;charset=utf-8,' + escape(CSV);

    // Now the little tricky part.
    // you can use either>> window.open(uri);
    // but this will not work in some browsers
    // or you will not get the correct file extension

    //this trick will generate a temp <a /> tag
    var link = document.createElement("a");
    link.href = uri;

    //set the visibility hidden so it will not effect on your web-layout
    link.style = "visibility:hidden";
    link.download = fileName + ".csv";

    //this part will append the anchor tag and remove it after automatic click
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
}
</script>

<script type="text/javascript">






</script>

</body>

</html>
